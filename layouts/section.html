{{ define "main" }}
    <article class="posts">
      {{ partial "header.html" . }}
      <div id="posts-archive" class="posts-list">
        <!-- Post Archive List -->
        {{ $remainingMonthsToOpen := 3 }}
        {{ range (where site.RegularPages "Type" "eq" "posts").GroupByDate "2006" -}}
          <section class="w-full">
            <h1 class="border-b-2 border-b-solid border-[var(--border-color)]
                py-2 text-[1.5rem] sticky top-0 bg-[var(--background-color)] z-1
                flex justify-between items-center">
                {{ .Key }}
                <small class="font-mono font-secondary text-[0.8rem]">{{ T "archivePage.postCountAnnual" (len .Pages) }}</small>
            </h1>

            {{ range .Pages.GroupByDate "January" }}
            <details class="posts-month-archive"{{ if gt $remainingMonthsToOpen 0 }} open{{ end }}>
                <summary class="flex items-center border-b border-b-dashed border-[var(--border-color)] py-2 px-1">
                    <h2 class="text-[1.1rem] inline-block w-full m-0
                        flex justify-between items-center">
                        {{ .Key }}
                        <small class="font-mono font-secondary text-[0.8rem]">{{ T "archivePage.postCountMonthly" (len .Pages) }}</small>
                    </h2>
                </summary>
                <div class="term-list">
                    <ul class="term-list-posts">
                      {{ range .Pages }}
                        <li>
                          <div style="display: flex; gap: 1rem;">
                              <time class="font-mono">
                                  {{ .Date.Format "Jan 02" }}
                              </time>
                              <a href="{{ .Permalink }}">
                                  {{ .Title }}
                              </a>
                          </div>
                          <div class="posts-item-category">
                              {{ with .Params.categories }}
                                  <a href="/categories/{{ . }}">
                                      {{ . }}
                                  </a>
                              {{ end }}
                          </div>
                        </li>
                      {{ end }}
                    </ul>
                </div>
            </details>
            {{ $remainingMonthsToOpen = sub $remainingMonthsToOpen 1 }}
            {{ end }}
          </section>
        {{ end }}
      </div>
    </article>
    {{ partial "footer.html" . }}
{{ end }}
